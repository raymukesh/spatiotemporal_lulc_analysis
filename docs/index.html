<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Spatiotemporal LULC Analysis</title>
    <meta name="description" content="QGIS plugin for multi-year land use/land cover change analysis with CSV, GeoTIFF, and interactive outputs." />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  </head>
  <body>
    <header class="hero">
      <nav class="nav">
        <div class="brand">Spatiotemporal LULC Analysis</div>
        <div class="nav-links">
          <a href="#features">Features</a>
          <a href="#workflow">Workflow</a>
          <a href="#outputs">Outputs</a>
          <a href="#methods">Methods</a>
          <a href="#download" class="pill">Get the plugin</a>
        </div>
      </nav>

      <div class="hero-content">
        <p class="kicker">QGIS Plugin</p>
        <h1>See change, not just snapshots.</h1>
        <p class="lede">
          Spatiotemporal LULC Analysis turns multi-year rasters into clear
          change stories: matrices, hotspots, intensities, and interactive
          charts in one run.
        </p>
        <div class="cta">
          <a class="btn primary" href="#download">Install via QGIS</a>
          <a class="btn ghost" href="#features">Explore features</a>
        </div>
        <div class="hero-badges">
          <span>CSV</span>
          <span>GeoTIFF</span>
          <span>HTML Charts</span>
        </div>
      </div>
    </header>

    <main>
      <section id="features" class="section reveal">
        <div class="section-header">
          <h2>Core features</h2>
          <p>Designed for repeatable, defensible land change reporting.</p>
        </div>
        <div class="feature-list">
          <div class="card">
            <h3>Analysis outputs</h3>
            <ul>
              <li>Area by class per year (per-class counts/area across each input raster)</li>
              <li>Interval change accounting (gain/loss per class, changed vs. total pixels)</li>
              <li>Transition matrices per interval</li>
              <li>Transition matrix for first vs. last year</li>
              <li>Top transitions ranking (largest class-to-class conversions)</li>
              <li>Change intensity metrics (interval + annualized intensity)</li>
              <li>Change frequency raster (counts how often each pixel changes across years)</li>
              <li>Change hotspots (kernel density heatmap) per interval</li>
              <li>Optional interactive charts for matrices and change metrics (HTML)</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="workflow" class="section alt reveal">
        <div class="section-header">
          <h2>Workflow</h2>
          <p>Simple inputs, strong validation, structured outputs.</p>
        </div>
        <ol class="steps">
          <li>Load annual rasters and optionally an AOI.</li>
          <li>Run validation: CRS, grid alignment, NoData, and class ranges.</li>
          <li>Export CSV, GeoTIFF, and HTML reports to your output folder.</li>
        </ol>
      </section>

      <section id="outputs" class="section reveal">
        <div class="section-header">
          <h2>Outputs</h2>
          <p>Quantitative tables plus spatial context for each interval.</p>
        </div>
        <div class="output-list">
          <div>
            <h3>CSV</h3>
            <ul>
              <li>Area by class per year</li>
              <li>Net/gross change per interval</li>
              <li>Transition matrices and top transitions</li>
              <li>Change intensity per interval</li>
            </ul>
          </div>
          <div>
            <h3>GeoTIFF</h3>
            <ul>
              <li>Change frequency raster</li>
              <li>Change hotspot heatmaps</li>
            </ul>
          </div>
          <div>
            <h3>HTML</h3>
            <ul>
              <li>Interactive charts for CSV outputs</li>
              <li>Sankey diagram across intervals</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="methods" class="section reveal">
        <div class="section-header">
          <h2>Methodological notes</h2>
          <p>Formulas follow the implementation used in the plugin.</p>
        </div>
        <details class="math-details">
          <summary>Show formulas and definitions</summary>
          <div class="math-block">
          <h3>Notation</h3>
          <p>\( \Omega_t \) denotes the set of pixels that are valid at year \( t \) after NoData filtering and any optional AOI masking are applied. All summations are taken only over these valid pixels.</p>
          <p>\( L_t(p) \) is the categorical class label assigned to pixel \( p \) at time \( t \). This label is an integer class ID derived directly from the input rasters.</p>
          <p>\( A_{px} \) is the area represented by a single pixel in the units selected by the user (pixels, square meters, or square kilometers). It converts counts of pixels into physical area.</p>
          <p>\( \mathbf{1}[\cdot] \) is the indicator function, which evaluates to 1 when the stated condition is true and 0 otherwise. It allows class membership and change conditions to be expressed as sums.</p>

          <h3>Area by class (year \( t \))</h3>
          <div class="equation">$$A_{k,t} = \sum_{p \in \Omega_t} \mathbf{1}[L_t(p)=k]$$</div>
          <p>This expression counts the number of valid pixels that belong to class \( k \) at time \( t \). In practice, it is the histogram count of class IDs computed over the valid portion of the raster.</p>
          <div class="equation">$$Area_{k,t} = A_{k,t} \cdot A_{px}$$</div>
          <p>The pixel count is then converted to an areal measure by multiplying by the area represented by a single pixel. This yields class area in the user-selected units.</p>
          <div class="equation">$$Percent_{k,t} = \frac{A_{k,t}}{\sum_k A_{k,t}} \times 100$$</div>
          <p>The proportional share of class \( k \) is computed by dividing by the total number of valid pixels across all classes and converting to a percentage. This supports consistent comparisons across years.</p>

          <h3>Interval change accounting (\( t_0 \rightarrow t_1 \))</h3>
          <div class="equation">$$\Omega = \Omega_{t_0} \cap \Omega_{t_1}$$</div>
          <p>The analysis uses only pixels that are valid in both years. This ensures that changes are evaluated on a comparable pixel set and are not driven by NoData or masking differences.</p>
          <div class="equation">$$Total = |\Omega|$$</div>
          <p>The total number of pixels in this intersection provides the denominator for interval-level change statistics.</p>
          <div class="equation">$$Changed = \sum_{p \in \Omega} \mathbf{1}[L_{t_0}(p) \ne L_{t_1}(p)]$$</div>
          <p>This counts all pixels whose class label differs between \( t_0 \) and \( t_1 \). It is the fundamental measure of change for the interval.</p>
          <div class="equation">$$Gain_k = \sum_{p \in \Omega} \mathbf{1}[L_{t_1}(p)=k \land L_{t_0}(p)\ne L_{t_1}(p)]$$</div>
          <p>Gain measures how many pixels transition into class \( k \) during the interval. Only pixels that actually changed are counted as gains.</p>
          <div class="equation">$$Loss_k = \sum_{p \in \Omega} \mathbf{1}[L_{t_0}(p)=k \land L_{t_0}(p)\ne L_{t_1}(p)]$$</div>
          <p>Loss measures how many pixels leave class \( k \) during the interval. Together with gains, it captures gross turnover of each class.</p>
          <div class="equation">$$Net_k = Gain_k - Loss_k$$</div>
          <p>Net change is the balance between gains and losses. A positive value indicates expansion of class \( k \), while a negative value indicates contraction.</p>
          <div class="equation">$$Gross_k = Gain_k + Loss_k$$</div>
          <p>Gross change reflects total class turnover irrespective of direction. It highlights dynamic classes even when net change is small.</p>

          <h3>Transition matrix (\( t_0 \rightarrow t_1 \))</h3>
          <div class="equation">$$M_{i,j} = \sum_{p \in \Omega} \mathbf{1}[L_{t_0}(p)=i \land L_{t_1}(p)=j]$$</div>
          <p>Each matrix cell counts the number of pixels moving from class \( i \) to class \( j \) over the interval. The diagonal entries represent persistence, where a pixel remains in the same class.</p>

          <h3>Top transitions</h3>
          <div class="equation">$$Total_{change} = \sum_{i \ne j} M_{i,j}$$</div>
          <p>The total change sum excludes the diagonal of the transition matrix, so it reflects only pixels that switched classes.</p>
          <div class="equation">$$Percent_{i,j} = \frac{M_{i,j}}{Total_{change}} \times 100$$</div>
          <p>Each transitionâ€™s share of total change is computed as a percentage, allowing the largest class-to-class conversions to be ranked.</p>
          <div class="equation">$$Area_{i,j} = M_{i,j} \cdot A_{px}$$</div>
          <p>Transition magnitudes are also expressed in area units to make the rankings interpretable in spatial terms.</p>

          <h3>Change intensity</h3>
          <div class="equation">$$I_{interval} = \frac{Changed}{Total}$$</div>
          <p>Interval intensity represents the fraction of valid pixels that changed within the interval, offering a normalized measure that is comparable across different study areas.</p>
          <div class="equation">$$I_{annual} = \frac{I_{interval}}{t_1 - t_0}$$</div>
          <p>The annualized intensity divides interval intensity by the number of years between observations, yielding an average per-year change rate.</p>

          <h3>Change frequency raster (all years)</h3>
          <div class="equation">$$F(p) = \sum_{t=1}^{T-1} \mathbf{1}[L_t(p) \ne L_{t+1}(p)]$$</div>
          <p>This raster counts how many times each pixel changes across the entire time series. It provides a spatial summary of repeated change events.</p>
          <p>The value is computed only if pixel \( p \) is valid in all years; otherwise the output is set to -1 to indicate insufficient data.</p>

          <h3>Change hotspots (per interval)</h3>
          <p>All changed pixels are converted into point events with unit weight, representing discrete change locations.</p>
          <p>A kernel density surface is then computed using a radius of 1000 map units and a pixel size equal to the raster resolution, producing a smooth hotspot intensity raster.</p>

          <h3>Charts</h3>
          <p>Interactive HTML charts are direct visualizations of the tabular outputs. They do not introduce new calculations, so they remain consistent with the reported metrics.</p>
          </div>
        </details>
      </section>

      <section class="section alt reveal">
        <div class="section-header">
          <h2>Gallery</h2>
          <p>Quick look at inputs, validation, and outputs.</p>
        </div>
        <div class="gallery">
          <figure>
            <img src="assets/01_inputs.png" alt="Plugin inputs panel" />
            <figcaption>Inputs</figcaption>
          </figure>
          <figure>
            <img src="assets/02_validation.png" alt="Validation panel checks" />
            <figcaption>Validation</figcaption>
          </figure>
          <figure>
            <img src="assets/03_output.png" alt="Outputs and reports" />
            <figcaption>Outputs</figcaption>
          </figure>
        </div>
      </section>

      <section class="section alt reveal">
        <div class="split">
          <div>
            <h2>Built for reliability</h2>
            <p>
              Input checks cover CRS, extent, resolution, grid alignment, value
              ranges, and NoData handling. Output units can be pixels, square
              meters, or square kilometers.
            </p>
          </div>
          <div class="panel">
            <h3>Validation checklist</h3>
            <ul>
              <li>CRS, pixel size, extent, and dimensions</li>
              <li>Grid alignment and data type warnings</li>
              <li>Per-raster class ranges and AOI coverage</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="download" class="section reveal">
        <div class="section-header">
          <h2>Get the plugin</h2>
          <p>Install from QGIS Plugin Manager or clone the repo.</p>
        </div>
        <div class="download">
          <a class="btn primary" href="https://github.com/raymukesh/spatiotemporal_lulc_analysis">View GitHub repo</a>
          <a class="btn ghost" href="https://plugins.qgis.org/">QGIS Plugin Manager</a>
        </div>
        <p class="fineprint">Author: Mukesh Ray</p>
      </section>
    </main>

    <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog">
      <button class="lightbox-close" type="button" aria-label="Close image">Close</button>
      <img id="lightbox-image" alt="" />
    </div>

    <footer class="footer">
      <p>Spatiotemporal LULC Analysis for QGIS</p>
    </footer>

    <script src="main.js"></script>
  </body>
</html>
